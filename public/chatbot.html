<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Surprise Granite AI Chatbot</title>
  <!-- (Use the previously provided HTML/JS, but add sessionId handling and contact form support) -->
  <!-- ... -->
  <script>
    // Add simple session handling
    function getSessionId() {
      let sid = localStorage.getItem('sg_chatbot_sid');
      if (!sid) {
        sid = Math.random().toString(36).slice(2) + Date.now();
        localStorage.setItem('sg_chatbot_sid', sid);
      }
      return sid;
    }

    // (In your send logic, include sessionId)
    // ...
    form.onsubmit = async function(e) {
      e.preventDefault();
      const text = input.value.trim();
      if (!text && attachedFiles.length === 0) return;
      addMessage(text, "user");
      addMessage("...", "ai");

      const formData = new FormData();
      formData.append("message", text);
      formData.append("sessionId", getSessionId());
      attachedFiles.forEach(file => formData.append("attachments", file));

      try {
        const res = await fetch("/api/chat", {
          method: "POST",
          body: formData
        });
        const data = await res.json();
        // ... (handle response as before)
      } catch (err) {
        // ...
      }
      input.value = "";
      attachedFiles = [];
      attachInput.value = "";
    };
    // Add a button/option for the user to send the chat as a contact form or request follow-up.
    // ...
  </script>
</head>
<body>
  <!-- ... -->
</body>
</html>
